# Admin 发布检查清单

## 发布前（T-1 Day）

### 代码与测试

- [ ] 所有 PR 已合并到 `main` 分支
- [ ] CI 流水线全部通过
  - [ ] Lint 检查通过
  - [ ] TypeScript 编译通过
  - [ ] 单元测试通过（覆盖率 > 80%）
  - [ ] E2E 测试通过
  - [ ] 安全测试通过
  - [ ] 权限测试通过
- [ ] 无已知的 Critical/High 级别 Bug
- [ ] 性能测试通过（P95 < 2s）

### 文档与变更

- [ ] CHANGELOG 已更新
- [ ] API 变更已文档化
- [ ] 新功能已添加用户指南
- [ ] 迁移脚本已准备（如需要）

### 权限与安全

- [ ] 新增 API 权限已配置
- [ ] 敏感操作已添加审计日志
- [ ] 权限矩阵已更新
- [ ] 安全扫描无高危漏洞

### 配置与环境

- [ ] 环境变量已配置
- [ ] Feature Flags 已确认
- [ ] 第三方服务配置已验证
- [ ] 数据库迁移脚本已验证

---

## 发布日（T Day）

### Staging 部署（T - 4h）

- [ ] 触发 Staging 部署
- [ ] 部署成功无错误
- [ ] 健康检查通过
- [ ] 核心功能验证
  - [ ] 登录/登出正常
  - [ ] 用户管理页面正常
  - [ ] Workspace 管理页面正常
  - [ ] 应用管理页面正常
  - [ ] 计费页面正常
  - [ ] 安全设置页面正常
- [ ] 无控制台错误
- [ ] 网络请求正常
- [ ] 响应时间正常

### 发布批准（T - 2h）

- [ ] 获得技术负责人批准
- [ ] 获得产品负责人批准
- [ ] 通知相关团队

### Production 部署（T）

- [ ] 确认低峰期（建议：工作日 10:00-16:00）
- [ ] 回滚方案已就绪
- [ ] 监控大盘已打开
- [ ] 触发 Production 部署
- [ ] 部署成功无错误
- [ ] 健康检查通过

### 发布后验证（T + 15min）

- [ ] 核心功能抽检
  - [ ] 登录功能正常
  - [ ] 主要页面可访问
  - [ ] API 响应正常
- [ ] 监控指标正常
  - [ ] 错误率 < 1%
  - [ ] P95 响应时间 < 2s
  - [ ] 无异常告警
- [ ] 日志无异常

---

## 发布后（T+1 Day）

### 监控复盘

- [ ] 24 小时错误率统计
- [ ] 24 小时性能指标
- [ ] 用户反馈收集
- [ ] 异常事件记录

### 文档更新

- [ ] 发布公告（如需要）
- [ ] 内部通知
- [ ] 文档同步

---

## 回滚检查清单

### 回滚决策条件

满足以下任一条件应触发回滚：

- [ ] 错误率 > 5%（持续 5 分钟）
- [ ] 核心功能不可用
- [ ] 健康检查连续失败 5 次
- [ ] 严重安全漏洞

### 回滚步骤

1. [ ] 通知团队启动回滚
2. [ ] 确认回滚目标版本
3. [ ] 执行回滚部署
4. [ ] 验证回滚成功
5. [ ] 通知相关方
6. [ ] 记录回滚原因

### 回滚后

- [ ] 分析回滚原因
- [ ] 创建修复计划
- [ ] 更新发布流程（如需要）

---

## 紧急发布检查清单

> 仅用于紧急修复，需额外审批

### 必须项

- [ ] 获得紧急发布批准
- [ ] 单元测试通过
- [ ] 基本功能验证
- [ ] 回滚方案确认

### 可跳过项（需记录原因）

- [ ] E2E 测试（原因：_____）
- [ ] 完整的 Staging 验证（原因：_____）
- [ ] 低峰期部署（原因：_____）

### 紧急发布后

- [ ] 24 小时内补充完整测试
- [ ] 48 小时内完成复盘
- [ ] 更新紧急发布记录

---

## 签名

| 角色 | 姓名 | 日期 | 签名 |
|------|------|------|------|
| 开发负责人 | | | |
| 测试负责人 | | | |
| 运维负责人 | | | |
| 产品负责人 | | | |
