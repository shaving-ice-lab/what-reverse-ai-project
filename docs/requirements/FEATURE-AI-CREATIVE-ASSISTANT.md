# AI 创意助手 - 核心功能需求文档

> **版本**: v1.0  
> **更新日期**: 2026-01-29  
> **优先级**: P0 - 核心差异化功能  
> **目标**: 让用户输入一个想法，自动生成完整的可执行方案

---

## 目录

1. [功能概述](#1-功能概述)
2. [核心价值](#2-核心价值)
3. [用户场景](#3-用户场景)
4. [功能设计](#4-功能设计)
5. [模板系统](#5-模板系统)
6. [工作流架构](#6-工作流架构)
7. [技术实现](#7-技术实现)
8. [UI/UX 设计](#8-uiux-设计)
9. [开发计划](#9-开发计划)

---

## 1. 功能概述

### 1.1 一句话定义

**AI 创意助手**：用户输入一个创意或目标，平台通过预设的智能工作流，自动生成完整的商业计划、内容策略、执行方案、时间表等结构化文档。

### 1.2 核心差异化

```
传统方式                          AgentFlow 方式
────────────────────────────────────────────────────────────────
用户有想法                        用户有想法
    ↓                                 ↓
手动搜索市场资料                   输入一句话描述
    ↓                                 ↓
花几天研究竞品                     AI 自动分析市场
    ↓                                 ↓
花几周写商业计划                   AI 生成完整方案
    ↓                                 ↓
反复修改迭代                       一键调整、实时优化
    ↓                                 ↓
耗时：2-4 周                       耗时：5-10 分钟
```

### 1.3 产品定位

| 维度 | 定位 |
|------|------|
| 目标用户 | 创业者、自媒体人、产品经理、企业主 |
| 核心场景 | 商业计划、内容策略、营销方案、产品规划 |
| 差异点 | 一键生成 + 可视化编辑 + 持续迭代 |
| 商业价值 | 提升10倍策划效率，降低90%试错成本 |

---

## 2. 核心价值

### 2.1 用户痛点

| 痛点 | 描述 | 影响程度 |
|------|------|----------|
| 不知道从哪开始 | 有想法但不知道如何系统化规划 | ⭐⭐⭐⭐⭐ |
| 缺乏行业经验 | 不了解市场、竞品、成功案例 | ⭐⭐⭐⭐⭐ |
| 时间成本高 | 写一份商业计划需要几周时间 | ⭐⭐⭐⭐ |
| 执行无方向 | 方案太宏观，不知道具体怎么做 | ⭐⭐⭐⭐ |
| 难以迭代 | 方案写完后修改成本高 | ⭐⭐⭐ |

### 2.2 解决方案价值

```
输入：「我想通过AI自媒体年入1000万」

输出（5分钟内自动生成）：
├── 市场机会分析
│   ├── 行业规模和增长趋势
│   ├── 已验证的成功案例（带数据）
│   └── 核心洞察和机会点
│
├── 商业模式设计
│   ├── 收入结构拆解
│   ├── 产品矩阵设计
│   └── 定价策略建议
│
├── 执行策略
│   ├── 平台布局策略
│   ├── 内容生产计划
│   └── 获客转化路径
│
├── 时间规划
│   ├── 阶段目标拆解
│   ├── 里程碑节点
│   └── 关键指标
│
├── 风险评估
│   ├── 主要风险识别
│   └── 应对策略
│
└── 立即行动清单
    ├── 本周任务
    ├── 首月目标
    └── 资源准备
```

---

## 3. 用户场景

### 3.1 场景一：创业者商业计划

**用户画像**：
- 25-40岁，有想法的创业者
- 可能是职场人想副业，或全职创业
- 对AI有基础了解，想借助AI风口

**使用流程**：
```
1. 选择模板「商业计划生成器」
2. 输入：
   - 创业方向：AI自媒体
   - 目标收入：年入1000万
   - 可用资源：1人团队、3万启动资金
   - 擅长领域：技术背景、会写代码
3. 点击「生成方案」
4. 等待3-5分钟，获得完整商业计划
5. 可视化编辑、调整参数、重新生成特定章节
6. 导出PDF/Markdown/Notion
```

### 3.2 场景二：自媒体内容规划

**用户画像**：
- 想做自媒体但不知道做什么
- 或已有账号想优化内容策略

**使用流程**：
```
1. 选择模板「自媒体内容策划」
2. 输入：
   - 目标平台：小红书 + 抖音
   - 领域方向：AI工具测评
   - 变现目标：月入5万
   - 可投入时间：每天2小时
3. 获得输出：
   - 账号定位建议
   - 内容选题库（50+选题）
   - 爆款标题模板
   - 发布排期表
   - 变现路径规划
```

### 3.3 场景三：企业营销方案

**用户画像**：
- 企业市场部/运营部
- 需要快速制定营销方案

**使用流程**：
```
1. 选择模板「营销方案生成器」
2. 输入：
   - 产品：SaaS软件
   - 目标客户：中小企业
   - 预算：10万/月
   - 目标：获客500家/月
3. 获得输出：
   - 目标客户画像
   - 渠道组合建议
   - 预算分配方案
   - 内容营销策略
   - ROI预估模型
```

### 3.4 场景四：产品需求规划

**用户画像**：
- 产品经理
- 需要将模糊想法转化为PRD

**使用流程**：
```
1. 选择模板「产品需求生成器」
2. 输入：
   - 产品想法：一个AI写作助手
   - 目标用户：自媒体创作者
   - 核心功能：帮助写爆款文章
3. 获得输出：
   - 完整PRD文档
   - 功能优先级矩阵
   - 用户故事列表
   - MVP范围定义
   - 技术方案建议
```

---

## 4. 功能设计

### 4.1 产品架构

```
┌─────────────────────────────────────────────────────────────────────┐
│                        AI 创意助手                                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌───────────────┐    ┌───────────────┐    ┌───────────────┐      │
│  │   模板中心    │    │   创意输入    │    │   方案输出    │      │
│  │               │    │               │    │               │      │
│  │ • 商业计划    │───→│ • 目标描述    │───→│ • 结构化文档  │      │
│  │ • 内容策划    │    │ • 约束条件    │    │ • 可视化图表  │      │
│  │ • 营销方案    │    │ • 背景信息    │    │ • 行动清单    │      │
│  │ • 产品规划    │    │ • 偏好设置    │    │ • 资源链接    │      │
│  │ • 自定义...   │    │               │    │               │      │
│  └───────────────┘    └───────────────┘    └───────────────┘      │
│           │                   │                    │               │
│           └───────────────────┴────────────────────┘               │
│                              │                                     │
│                              ▼                                     │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │                     智能工作流引擎                            │  │
│  │                                                             │  │
│  │   ┌─────┐   ┌─────┐   ┌─────┐   ┌─────┐   ┌─────┐        │  │
│  │   │市场 │──→│案例 │──→│模式 │──→│策略 │──→│输出 │        │  │
│  │   │分析 │   │研究 │   │设计 │   │规划 │   │生成 │        │  │
│  │   └─────┘   └─────┘   └─────┘   └─────┘   └─────┘        │  │
│  │                                                             │  │
│  │   • 联网搜索最新数据                                         │  │
│  │   • 多轮AI推理和验证                                         │  │
│  │   • 结构化知识整合                                           │  │
│  │   • 个性化调整优化                                           │  │
│  │                                                             │  │
│  └─────────────────────────────────────────────────────────────┘  │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.2 核心功能模块

#### F1: 模板中心

| 功能点 | 描述 | 优先级 |
|--------|------|--------|
| F1.1 | 预设模板浏览和选择 | P0 |
| F1.2 | 模板详情和示例预览 | P0 |
| F1.3 | 模板收藏和最近使用 | P1 |
| F1.4 | 自定义模板创建 | P1 |
| F1.5 | 社区模板分享 | P2 |

#### F2: 创意输入

| 功能点 | 描述 | 优先级 |
|--------|------|--------|
| F2.1 | 自然语言输入（一句话描述） | P0 |
| F2.2 | 结构化表单（引导式填写） | P0 |
| F2.3 | AI 追问（自动补充缺失信息） | P0 |
| F2.4 | 参考案例上传（学习模仿） | P1 |
| F2.5 | 历史输入记忆 | P1 |

#### F3: 方案生成

| 功能点 | 描述 | 优先级 |
|--------|------|--------|
| F3.1 | 一键生成完整方案 | P0 |
| F3.2 | 实时生成进度展示 | P0 |
| F3.3 | 分章节流式输出 | P0 |
| F3.4 | 联网搜索增强 | P0 |
| F3.5 | 数据可视化图表 | P1 |

#### F4: 方案编辑

| 功能点 | 描述 | 优先级 |
|--------|------|--------|
| F4.1 | 章节单独重新生成 | P0 |
| F4.2 | 内容手动编辑 | P0 |
| F4.3 | AI 辅助改写优化 | P1 |
| F4.4 | 版本历史回溯 | P1 |
| F4.5 | 协作编辑 | P2 |

#### F5: 导出分享

| 功能点 | 描述 | 优先级 |
|--------|------|--------|
| F5.1 | Markdown 导出 | P0 |
| F5.2 | PDF 导出 | P0 |
| F5.3 | 链接分享（可设密码） | P1 |
| F5.4 | Notion/飞书同步 | P2 |
| F5.5 | 一键发布到博客 | P2 |

---

## 5. 模板系统

### 5.1 预设模板列表

#### 商业策划类

| 模板名称 | 描述 | 输出内容 |
|----------|------|----------|
| 商业计划生成器 | 完整商业计划书 | 市场分析、商业模式、财务预测、执行计划 |
| 副业方案规划 | 零成本副业起步 | 方向选择、变现路径、时间规划、风险评估 |
| 创业BP生成 | 融资用商业计划 | 痛点分析、解决方案、市场规模、团队介绍 |
| 竞品分析报告 | 深度竞品研究 | 竞品矩阵、功能对比、差异化机会 |

#### 内容营销类

| 模板名称 | 描述 | 输出内容 |
|----------|------|----------|
| 自媒体内容策划 | 账号运营全方案 | 定位、选题库、排期表、变现路径 |
| 爆款选题生成 | 批量选题创意 | 50+选题、标题模板、热点结合 |
| 小红书运营方案 | 小红书专项 | 笔记模板、封面公式、引流策略 |
| 短视频脚本批量 | 视频内容生产 | 脚本框架、分镜建议、发布策略 |

#### 产品规划类

| 模板名称 | 描述 | 输出内容 |
|----------|------|----------|
| PRD文档生成 | 产品需求文档 | 背景、用户故事、功能列表、原型建议 |
| MVP规划方案 | 最小可行产品 | 核心功能、砍掉什么、验证指标 |
| 功能优先级矩阵 | 需求排序 | 价值/成本矩阵、开发排期建议 |
| 用户调研方案 | 用户研究 | 调研问题、访谈提纲、分析框架 |

#### 企业服务类

| 模板名称 | 描述 | 输出内容 |
|----------|------|----------|
| 营销方案生成 | 整合营销策略 | 渠道组合、预算分配、ROI预估 |
| 品牌定位策划 | 品牌建设 | 品牌故事、视觉建议、传播策略 |
| 活动策划方案 | 线上线下活动 | 主题、流程、预算、执行SOP |
| 培训课程设计 | 企业内训 | 课程大纲、PPT框架、互动设计 |

### 5.2 模板结构定义

```typescript
interface CreativeTemplate {
  id: string;
  name: string;
  description: string;
  icon: string;
  category: 'business' | 'content' | 'product' | 'marketing';
  
  // 输入定义
  inputs: {
    required: InputField[];  // 必填项
    optional: InputField[];  // 选填项
  };
  
  // 输出结构
  outputSections: {
    id: string;
    title: string;
    description: string;
    promptTemplate: string;  // 生成该章节的提示词模板
  }[];
  
  // 关联的工作流ID
  workflowId: string;
  
  // 示例
  example: {
    input: Record<string, any>;
    output: string;  // Markdown 格式
  };
  
  // 元数据
  usageCount: number;
  rating: number;
  tags: string[];
}

interface InputField {
  id: string;
  label: string;
  type: 'text' | 'textarea' | 'number' | 'select' | 'multiselect';
  placeholder?: string;
  options?: { value: string; label: string }[];
  validation?: {
    required?: boolean;
    minLength?: number;
    maxLength?: number;
  };
  aiSuggest?: boolean;  // 是否启用AI建议
}
```

### 5.3 模板示例：商业计划生成器

```yaml
id: business-plan-generator
name: 商业计划生成器
description: 输入你的商业想法，自动生成完整的商业计划书
icon: briefcase
category: business

inputs:
  required:
    - id: idea
      label: 商业想法
      type: textarea
      placeholder: "例如：我想做AI自媒体，通过教学和工具服务年入1000万"
      validation:
        required: true
        minLength: 10
    
    - id: target_revenue
      label: 目标收入
      type: select
      options:
        - { value: "100k", label: "年入10万" }
        - { value: "500k", label: "年入50万" }
        - { value: "1m", label: "年入100万" }
        - { value: "5m", label: "年入500万" }
        - { value: "10m", label: "年入1000万" }
        - { value: "custom", label: "自定义" }
  
  optional:
    - id: resources
      label: 可用资源
      type: textarea
      placeholder: "团队人数、启动资金、可投入时间等"
    
    - id: background
      label: 个人背景
      type: textarea
      placeholder: "擅长领域、工作经验、已有资源等"
    
    - id: constraints
      label: 限制条件
      type: textarea
      placeholder: "时间限制、预算限制、地域限制等"

outputSections:
  - id: market-analysis
    title: 市场机会分析
    description: 分析行业现状、成功案例、核心洞察
    
  - id: business-model
    title: 商业模式设计
    description: 收入结构、产品矩阵、定价策略
    
  - id: execution-strategy
    title: 执行策略
    description: 平台布局、内容计划、获客路径
    
  - id: timeline
    title: 时间规划
    description: 阶段目标、里程碑、关键指标
    
  - id: risk-assessment
    title: 风险评估
    description: 主要风险和应对策略
    
  - id: action-plan
    title: 立即行动
    description: 本周任务、首月目标、资源清单

workflowId: tpl_business_plan_v1
```

---

## 6. 工作流架构

### 6.1 商业计划生成工作流

```
┌─────────────────────────────────────────────────────────────────────┐
│                   商业计划生成工作流                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────┐                                                        │
│  │  Start  │                                                        │
│  │  Node   │                                                        │
│  └────┬────┘                                                        │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                    输入解析节点                               │   │
│  │  • 解析用户输入                                               │   │
│  │  • 提取关键信息：领域、目标、资源、约束                        │   │
│  │  • 生成搜索关键词                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                    联网搜索节点                               │   │
│  │  并行搜索：                                                   │   │
│  │  • 行业报告和市场数据                                         │   │
│  │  • 成功案例和收入数据                                         │   │
│  │  • 竞争对手分析                                               │   │
│  │  • 最新趋势和热点                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                   市场分析生成节点                            │   │
│  │  • 整合搜索结果                                               │   │
│  │  • 分析行业机会                                               │   │
│  │  • 提取成功案例（带具体数据）                                  │   │
│  │  • 总结核心洞察                                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                   商业模式设计节点                            │   │
│  │  • 设计收入结构（参考成功案例）                                │   │
│  │  • 规划产品矩阵（低-中-高价格带）                              │   │
│  │  • 制定定价策略                                               │   │
│  │  • 拆解目标收入                                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                   执行策略规划节点                            │   │
│  │  • 平台选择和布局策略                                         │   │
│  │  • 内容生产计划（频率、类型）                                  │   │
│  │  • 获客转化路径设计                                           │   │
│  │  • 资源配置建议                                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                   时间规划节点                                │   │
│  │  • 分阶段目标设定                                             │   │
│  │  • 里程碑和关键节点                                           │   │
│  │  • 各阶段预期收入                                             │   │
│  │  • 关键指标定义                                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                   风险评估节点                                │   │
│  │  • 识别主要风险                                               │   │
│  │  • 评估影响程度                                               │   │
│  │  • 制定应对策略                                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                   行动计划节点                                │   │
│  │  • 生成本周任务清单                                           │   │
│  │  • 制定首月目标                                               │   │
│  │  • 列出必备工具和资源                                         │   │
│  │  • 预估启动资金                                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                   文档整合节点                                │   │
│  │  • 整合所有章节                                               │   │
│  │  • 添加目录和格式                                             │   │
│  │  • 生成摘要                                                   │   │
│  │  • 输出最终 Markdown                                          │   │
│  └─────────────────────────────────────────────────────────────┘   │
│       │                                                             │
│       ▼                                                             │
│  ┌─────────┐                                                        │
│  │   End   │                                                        │
│  │  Node   │                                                        │
│  └─────────┘                                                        │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 6.2 节点详细设计

#### 节点1: 输入解析 (input_parser)

```typescript
const inputParserNode = {
  type: 'llm',
  config: {
    model: 'gpt-4',
    systemPrompt: `你是一个商业分析专家。分析用户的商业想法，提取以下信息：
    
1. 业务领域（具体行业/赛道）
2. 目标收入（具体数字）
3. 目标时间（多长时间达成）
4. 可用资源（资金、时间、人力）
5. 个人优势（技能、经验、人脉）
6. 限制条件（不能做什么）

同时生成3-5个用于市场调研的搜索关键词。

以JSON格式输出。`,
    userPrompt: `{{input.idea}}

其他信息：
- 目标收入：{{input.target_revenue}}
- 可用资源：{{input.resources}}
- 个人背景：{{input.background}}
- 限制条件：{{input.constraints}}`,
    outputFormat: 'json'
  }
};
```

#### 节点2: 联网搜索 (web_search)

```typescript
const webSearchNode = {
  type: 'web_search',
  config: {
    // 并行执行多个搜索
    queries: [
      '{{parsed.domain}} 市场规模 2025 2026',
      '{{parsed.domain}} 成功案例 收入 赚钱',
      '{{parsed.domain}} 竞争对手 头部玩家',
      '{{parsed.domain}} 最新趋势 风口'
    ],
    resultsPerQuery: 5,
    freshness: 'month', // 优先最近一个月的结果
    language: 'zh-CN'
  }
};
```

#### 节点3: 市场分析生成 (market_analysis)

```typescript
const marketAnalysisNode = {
  type: 'llm',
  config: {
    model: 'gpt-4',
    systemPrompt: `你是一个资深的市场研究分析师，擅长从海量信息中提取有价值的洞察。

请基于搜索结果，生成一份市场机会分析报告，包含：

## 一、市场机会分析

### 已验证的成功案例
（用表格展示，包含：案例名称、模式、收入规模、关键成功因素）

### 核心洞察
（3-5条核心发现，每条都要有数据支撑）

要求：
- 只引用真实的案例和数据
- 如果搜索结果中没有具体数据，标注为"预估"
- 重点关注用户所在领域最相关的案例
- 文字精炼，重点突出`,
    userPrompt: `用户商业想法：{{input.idea}}
目标收入：{{parsed.target_revenue}}
业务领域：{{parsed.domain}}

搜索结果：
{{search_results}}`,
    temperature: 0.7
  }
};
```

### 6.3 新增节点类型

为支持 AI 创意助手，需要新增以下节点类型：

| 节点类型 | 用途 | 优先级 |
|----------|------|--------|
| `web_search` | 联网搜索实时信息 | P0 |
| `document_generator` | 生成结构化文档 | P0 |
| `table_generator` | 生成数据表格 | P1 |
| `chart_generator` | 生成可视化图表 | P1 |
| `parallel_executor` | 并行执行多个子流程 | P1 |
| `content_aggregator` | 内容聚合整理 | P1 |

---

## 7. 技术实现

### 7.1 联网搜索能力

```typescript
// 搜索服务接口
interface SearchService {
  search(query: string, options: SearchOptions): Promise<SearchResult[]>;
}

interface SearchOptions {
  maxResults: number;
  freshness: 'day' | 'week' | 'month' | 'year';
  language: string;
  region?: string;
}

interface SearchResult {
  title: string;
  url: string;
  snippet: string;
  publishedDate?: string;
  source: string;
}

// 实现选项
// 1. SerpAPI (推荐，支持Google搜索)
// 2. Bing Search API
// 3. Tavily API (专为AI设计)
// 4. Exa AI (语义搜索)
```

### 7.2 长文档生成策略

```typescript
// 分章节流式生成
async function generateBusinessPlan(
  input: BusinessPlanInput,
  onProgress: (section: string, content: string) => void
): Promise<string> {
  const sections = [
    'market_analysis',
    'business_model',
    'execution_strategy',
    'timeline',
    'risk_assessment',
    'action_plan'
  ];
  
  const results: Record<string, string> = {};
  
  for (const section of sections) {
    // 每个章节独立生成，可以引用前面章节的结果
    const context = buildSectionContext(input, results, section);
    const content = await generateSection(section, context);
    
    results[section] = content;
    onProgress(section, content);
  }
  
  // 整合为完整文档
  return assembleDocument(results);
}
```

### 7.3 API 设计

```typescript
// 创建生成任务
POST /api/v1/creative/generate
{
  "templateId": "business-plan-generator",
  "inputs": {
    "idea": "AI自媒体年入1000万",
    "target_revenue": "10m",
    "resources": "1人团队，3万启动资金",
    "background": "技术背景，会写代码"
  }
}

// 响应
{
  "taskId": "task_xxx",
  "status": "processing",
  "estimatedTime": 180  // 秒
}

// 获取生成状态（支持SSE流式）
GET /api/v1/creative/generate/{taskId}/stream

// SSE事件
event: section_start
data: {"section": "market_analysis", "title": "市场机会分析"}

event: section_content
data: {"section": "market_analysis", "content": "## 一、市场机会分析\n\n..."}

event: section_complete
data: {"section": "market_analysis"}

event: complete
data: {"documentId": "doc_xxx", "markdown": "...完整内容..."}

// 重新生成单个章节
POST /api/v1/creative/regenerate-section
{
  "documentId": "doc_xxx",
  "sectionId": "market_analysis",
  "instruction": "请增加更多小红书相关的案例"
}
```

### 7.4 存储设计

```sql
-- 生成任务表
CREATE TABLE creative_tasks (
    id              VARCHAR(36) PRIMARY KEY,
    user_id         VARCHAR(36) NOT NULL,
    template_id     VARCHAR(100) NOT NULL,
    
    inputs          JSONB NOT NULL,
    status          VARCHAR(20) DEFAULT 'pending',
    
    -- 各章节状态
    sections        JSONB DEFAULT '{}',
    
    -- 最终输出
    output_markdown TEXT,
    output_metadata JSONB,
    
    -- 搜索结果缓存
    search_cache    JSONB,
    
    -- Token消耗统计
    token_usage     JSONB DEFAULT '{}',
    
    started_at      TIMESTAMPTZ,
    completed_at    TIMESTAMPTZ,
    created_at      TIMESTAMPTZ DEFAULT NOW()
);

-- 生成文档表
CREATE TABLE creative_documents (
    id              VARCHAR(36) PRIMARY KEY,
    user_id         VARCHAR(36) NOT NULL,
    task_id         VARCHAR(36) NOT NULL,
    template_id     VARCHAR(100) NOT NULL,
    
    title           VARCHAR(200) NOT NULL,
    content         TEXT NOT NULL,
    
    -- 章节结构
    sections        JSONB NOT NULL,
    
    -- 版本控制
    version         INTEGER DEFAULT 1,
    parent_id       VARCHAR(36),
    
    -- 分享设置
    share_id        VARCHAR(20) UNIQUE,
    share_password  VARCHAR(100),
    is_public       BOOLEAN DEFAULT FALSE,
    
    created_at      TIMESTAMPTZ DEFAULT NOW(),
    updated_at      TIMESTAMPTZ DEFAULT NOW()
);
```

---

## 8. UI/UX 设计

### 8.1 页面流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                         首页/仪表盘                                  │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  🚀 开始新的创意                                              │   │
│  │                                                             │   │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐          │   │
│  │  │ 💼     │ │ 📱     │ │ 🎯     │ │ 📦     │          │   │
│  │  │商业计划 │ │内容策划 │ │营销方案 │ │产品规划 │          │   │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘          │   │
│  │                                                             │   │
│  │  或者直接输入你的想法...                                      │   │
│  │  ┌─────────────────────────────────────────────────────┐   │   │
│  │  │ 我想做AI自媒体，通过教学和工具服务年入1000万...      │   │   │
│  │  └─────────────────────────────────────────────────────┘   │   │
│  │                                              [开始生成 →]   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📄 最近的方案                                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ AI自媒体1000万方案  •  商业计划  •  2小时前  •  [继续编辑]    │   │
│  │ 小红书运营策略      •  内容策划  •  昨天      •  [继续编辑]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 8.2 输入页面

```
┌─────────────────────────────────────────────────────────────────────┐
│  ← 返回                    商业计划生成器                            │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │  💡 描述你的商业想法                                         │   │
│  │                                                             │   │
│  │  ┌─────────────────────────────────────────────────────┐   │   │
│  │  │ 我想通过AI自媒体实现年入1000万。计划通过知识付费、  │   │   │
│  │  │ AI工具服务和企业咨询三条线来变现。我有技术背景，    │   │   │
│  │  │ 可以全职投入，启动资金约3万元。                      │   │   │
│  │  │                                                     │   │   │
│  │  │ [AI建议: 补充你的擅长领域和目标受众]                │   │   │
│  │  └─────────────────────────────────────────────────────┘   │   │
│  │                                                             │   │
│  │  📊 目标收入                                                │   │
│  │  ○ 年入10万  ○ 年入50万  ● 年入1000万  ○ 自定义           │   │
│  │                                                             │   │
│  │  ⏰ 期望达成时间                                            │   │
│  │  ○ 6个月  ● 1年  ○ 2年  ○ 3年                             │   │
│  │                                                             │   │
│  │  ➕ 展开更多选项                                            │   │
│  │  ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐  │   │
│  │    可用资源：[1人团队，3万启动资金                    ]     │   │
│  │    个人背景：[技术背景，5年开发经验                   ]     │   │
│  │    限制条件：[不想露脸，时间有限                      ]     │   │
│  │  └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘  │   │
│  │                                                             │   │
│  │                              [预览示例] [🚀 开始生成方案]   │   │
│  │                                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  💡 提示：描述越详细，生成的方案越精准                               │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 8.3 生成过程页面

```
┌─────────────────────────────────────────────────────────────────────┐
│                    🔄 正在生成你的商业计划...                         │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │  ✅ 分析你的输入                                    完成     │   │
│  │  ✅ 搜索市场数据和案例                              完成     │   │
│  │  ✅ 生成市场机会分析                                完成     │   │
│  │  🔄 设计商业模式                                   进行中... │   │
│  │  ○ 规划执行策略                                     等待     │   │
│  │  ○ 制定时间计划                                     等待     │   │
│  │  ○ 评估风险与应对                                   等待     │   │
│  │  ○ 生成行动清单                                     等待     │   │
│  │                                                             │   │
│  │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━░░░░░░░░░░░  45%            │   │
│  │  预计剩余时间：2分钟                                         │   │
│  │                                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  📄 实时预览                                                │   │
│  │  ┌─────────────────────────────────────────────────────┐   │   │
│  │  │ ## 一、市场机会分析                                  │   │   │
│  │  │                                                     │   │   │
│  │  │ ### 已验证的成功案例                                │   │   │
│  │  │                                                     │   │   │
│  │  │ | 案例 | 模式 | 收入规模 | 关键成功因素 |          │   │   │
│  │  │ |------|------|----------|--------------|          │   │   │
│  │  │ | 李一舟 | AI课程 | 1.75亿 | 低价引流... |         │   │   │
│  │  │ | ...正在生成更多内容...                           │   │   │
│  │  │ █                                                  │   │   │
│  │  └─────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│                                                      [取消生成]     │
└─────────────────────────────────────────────────────────────────────┘
```

### 8.4 结果页面

```
┌─────────────────────────────────────────────────────────────────────┐
│  ← 返回    AI自媒体1000万赚钱可行方案    [编辑] [分享] [导出 ▾]    │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌──────────────┬────────────────────────────────────────────────┐ │
│  │   📑 目录    │                                                │ │
│  │              │  # AI自媒体1000万赚钱可行方案                  │ │
│  │  ▼ 市场机会  │                                                │ │
│  │    成功案例  │  > 基于2025-2026年国内市场调研                 │ │
│  │    核心洞察  │                                                │ │
│  │              │  ---                                           │ │
│  │  ▼ 商业模式  │                                                │ │
│  │    收入结构  │  ## 一、市场机会分析                           │ │
│  │    产品矩阵  │                                                │ │
│  │              │  ### 已验证的成功案例                          │ │
│  │  ▼ 执行策略  │                                                │ │
│  │    平台布局  │  | 案例 | 模式 | 收入规模 | 关键成功因素 |    │ │
│  │    内容计划  │  |------|------|----------|--------------|    │ │
│  │              │  | 李一舟 | AI课程销售 | **1.75亿** | 低价... │ │
│  │  ▼ 时间规划  │  | 罗永浩数字人 | AI直播带货 | 单场5500万 |...│ │
│  │              │                                                │ │
│  │  ▼ 风险评估  │  ### 核心洞察                                  │ │
│  │              │                                                │ │
│  │  ▼ 行动计划  │  1. **卖课是最快的变现方式**                   │ │
│  │              │  2. **数字人直播正在爆发**                     │ │
│  │              │  3. **小红书是新蓝海**                         │ │
│  │              │                                                │ │
│  │              │  ---                                           │ │
│  │  ───────────│                                                │ │
│  │  [🔄 重新   │  ## 二、推荐路径：三驾马车模式                 │ │
│  │     生成]   │                                                │ │
│  │  [✏️ 编辑  │  ### 总体目标拆解（1000万/年）                 │ │
│  │     章节]   │                                                │ │
│  │              │  ```                                           │ │
│  │              │  收入构成：                                    │ │
│  │              │  ├── 知识付费（占40%）：400万                  │ │
│  │              │  ├── AI工具/服务（占35%）：350万               │ │
│  │              │  └── 企业服务/咨询（占25%）：250万             │ │
│  │              │  ```                                           │ │
│  └──────────────┴────────────────────────────────────────────────┘ │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 9. 开发计划

### 9.1 Phase 1: MVP（4周）

**目标**：实现核心生成功能，验证产品价值

| 周次 | 任务 | 交付物 |
|------|------|--------|
| W1 | 模板系统基础 | 模板数据结构、存储、API |
| W2 | 联网搜索集成 | 搜索服务接入、结果解析 |
| W3 | 长文档生成 | 分章节生成、流式输出 |
| W4 | 结果展示 | 预览页面、导出功能 |

**MVP 功能范围**：
- ✅ 1个模板（商业计划生成器）
- ✅ 联网搜索增强
- ✅ 分章节流式生成
- ✅ Markdown 预览和导出
- ❌ 章节重新生成（Phase 2）
- ❌ 自定义模板（Phase 2）

### 9.2 Phase 2: 完善（4周）

**目标**：完善用户体验，增加模板

| 周次 | 任务 | 交付物 |
|------|------|--------|
| W5 | 章节编辑 | 单章节重新生成、手动编辑 |
| W6 | 更多模板 | 内容策划、营销方案模板 |
| W7 | 版本历史 | 版本管理、回溯功能 |
| W8 | 分享功能 | 链接分享、密码保护 |

### 9.3 Phase 3: 扩展（4周）

**目标**：模板市场、高级功能

| 周次 | 任务 | 交付物 |
|------|------|--------|
| W9-10 | 模板市场 | 用户创建模板、社区分享 |
| W11 | 图表生成 | 数据可视化集成 |
| W12 | 协作编辑 | 多人协作、评论功能 |

---

## 附录

### A. 竞品参考

| 产品 | 定位 | 优势 | 差距 |
|------|------|------|------|
| Notion AI | 写作助手 | 集成好 | 无结构化模板 |
| Gamma | PPT生成 | UI美观 | 仅限演示文稿 |
| Copy.ai | 营销文案 | 专业模板 | 无商业计划 |
| ChatGPT | 通用对话 | 能力强 | 无工作流、无联网 |

### B. 关键成功指标

| 指标 | 目标 | 说明 |
|------|------|------|
| 生成完成率 | > 90% | 用户开始生成后完成的比例 |
| 满意度评分 | > 4.0/5 | 用户对生成结果的评分 |
| 二次使用率 | > 60% | 首次使用后7天内再次使用 |
| 分享率 | > 20% | 生成后分享给他人的比例 |
| NPS | > 40 | 净推荐值 |

---

*本文档定义了 AgentFlow 的核心差异化功能——AI 创意助手。通过智能工作流将用户的一个想法转化为完整的可执行方案。*
