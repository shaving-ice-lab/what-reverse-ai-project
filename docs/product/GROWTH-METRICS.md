# 数据分析与增长指标

版本：v1.0
日期：2026-02-03
状态：Active

---

## 1. 核心漏斗定义

### 用户转化漏斗

```
注册
  │ (100%)
  ▼
创建 Workspace
  │ (95%)
  ▼
创建 App
  │ (60%)
  ▼
发布 App
  │ (30%)
  ▼
公开访问
  │ (15%)
  ▼
付费转化
  │ (5%)
```

### 埋点事件

| 事件名 | 触发时机 | 参数 |
|-------|---------|------|
| `user.registered` | 用户注册成功 | user_id, source |
| `workspace.created` | 创建 Workspace | workspace_id, user_id |
| `app.created` | 创建 App | app_id, workspace_id, source |
| `app.published` | 发布 App | app_id, access_mode |
| `app.accessed` | 公开访问 | app_id, session_type |
| `subscription.started` | 开始付费 | workspace_id, plan |

---

## 2. 关键指标定义

### 用户指标

| 指标 | 定义 | 计算方式 |
|-----|------|---------|
| DAU | 日活跃用户数 | 当日有登录行为的唯一用户 |
| WAU | 周活跃用户数 | 7 天内有登录行为的唯一用户 |
| MAU | 月活跃用户数 | 30 天内有登录行为的唯一用户 |
| 新用户 | 当日新注册用户 | 注册时间在当日 |
| 留存率 | 次日/7日/30日留存 | 回访用户 / 新用户 |

### 业务指标

| 指标 | 定义 | 计算方式 |
|-----|------|---------|
| App 发布数 | 发布的 App 总数 | status=published 的 App |
| 发布率 | 创建后发布的比例 | 已发布 / 已创建 |
| 公开访问量 | 匿名访问次数 | runtime_entry 事件数 |
| 执行成功率 | 执行成功的比例 | 成功执行 / 总执行 |

### 收入指标

| 指标 | 定义 | 计算方式 |
|-----|------|---------|
| MRR | 月经常性收入 | 所有活跃订阅月费总和 |
| ARPU | 每用户平均收入 | MRR / 付费用户数 |
| 转化率 | 免费到付费转化 | 付费用户 / 总用户 |
| 流失率 | 付费用户流失 | 取消订阅 / 付费用户 |

---

## 3. A/B 测试框架

### 实验设计

```yaml
experiment:
  name: "新手引导优化"
  id: "exp_onboarding_v2"
  description: "测试新的新手引导流程"
  
  # 分组
  variants:
    - id: "control"
      weight: 50
      config: {}
    - id: "treatment"
      weight: 50
      config:
        show_tutorial: true
        highlight_features: true
  
  # 指标
  metrics:
    primary: "app_creation_rate"
    secondary:
      - "time_to_first_app"
      - "7d_retention"
  
  # 条件
  targeting:
    user_type: "new"
    registered_after: "2026-02-01"
```

### 分流策略

| 策略 | 说明 | 适用场景 |
|-----|------|---------|
| 用户 ID 分流 | 按用户 ID 哈希 | 用户级实验 |
| 请求分流 | 按请求随机 | 功能级实验 |
| Workspace 分流 | 按空间 ID | 团队级实验 |
| 地域分流 | 按用户地区 | 区域实验 |

### 实验流程

```
1. 设计实验
   │ → 定义假设、指标、分组
   ▼
2. 开发实现
   │ → Feature Flag 控制
   ▼
3. 小流量验证
   │ → 5% 流量 3 天
   ▼
4. 扩大流量
   │ → 50% 流量 7 天
   ▼
5. 数据分析
   │ → 统计显著性检验
   ▼
6. 决策
   │ → 全量/放弃/迭代
```

---

## 4. 示例应用与模板

### 内置示例 App

| 名称 | 类型 | 功能 |
|-----|------|------|
| 日报助手 | AI 生成 | 输入关键词生成日报 |
| 数据查询 | 数据库 | 查询和展示数据 |
| 表单收集 | 表单 | 收集和存储用户输入 |
| API 代理 | HTTP | 调用外部 API |
| 翻译工具 | AI | 多语言翻译 |

### Demo 数据包

```json
{
  "workspace": {
    "name": "Demo Workspace",
    "slug": "demo"
  },
  "apps": [
    {
      "name": "日报助手",
      "slug": "daily-report",
      "workflow": { /* 工作流定义 */ },
      "ui_schema": { /* UI 配置 */ }
    }
  ]
}
```

### 演示流程脚本

```markdown
## 产品演示流程

### 1. 介绍 (2分钟)
- 平台定位和核心价值
- 目标用户和场景

### 2. 创建 App (5分钟)
- 通过 AI 对话描述需求
- 展示自动生成的工作流
- 简单调整和配置

### 3. 发布和访问 (3分钟)
- 配置访问策略
- 发布并获取链接
- 演示公开访问体验

### 4. 监控和管理 (2分钟)
- 查看执行历史
- 展示用量统计
- 版本管理演示
```

---

## 5. 监控仪表盘

### 核心看板

| 看板 | 指标 |
|-----|------|
| 用户增长 | DAU/WAU/MAU、新用户、留存 |
| 产品使用 | App 创建、发布、执行量 |
| 技术健康 | API 成功率、延迟、错误率 |
| 收入 | MRR、ARPU、转化率 |

### 告警规则

| 指标 | 阈值 | 告警级别 |
|-----|------|---------|
| DAU 下降 | >20% | P2 |
| 执行成功率 | <98% | P1 |
| 发布率下降 | >30% | P3 |
| MRR 下降 | >10% | P1 |

---

## 变更记录

| 日期 | 版本 | 变更内容 | 作者 |
|------|------|---------|------|
| 2026-02-03 | v1.0 | 初始版本 | AgentFlow Team |
